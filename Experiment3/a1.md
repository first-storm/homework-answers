# 分段函数计算 - 题解与分析

## 题目描述

计算以下分段函数的值：

```
        |x|        x < 0
y =     2x + 1     0 <= x < 100
        x^2        x >= 100
```

要求：输入x的值，输出y的结果(输出y保留两位小数)

## 解题思路

1. **分段点分析**
   - 该函数在x=0和x=100处发生分段
   - 需要使用if-else语句处理三种不同的情况

2. **特殊函数处理**
   - |x|表示绝对值，在C语言中使用fabs()函数（需要包含math.h）
   - x^2表示x的平方，可以直接用x * x计算

3. **输出格式**
   - 要求保留两位小数，使用%.2f格式控制符

## 代码实现

```c
#include <stdio.h>
#include <math.h>  // 需要使用fabs()函数

int main() {
    double x, y;   // 使用double类型以提高精度
    
    // 1. 输入x值
    printf("请输入x的值：");
    scanf("%lf", &x);
    
    // 2. 根据x的值计算对应的y
    if (x < 0) {
        y = fabs(x);    // 第一种情况：x < 0时，y = |x|
    } else if (x < 100) {   // 此处不需要写x >= 0，因为上一个if已经排除了x < 0的情况
        y = 2 * x + 1;  // 第二种情况：0 <= x < 100时，y = 2x + 1
    } else {
        y = x * x;      // 第三种情况：x >= 100时，y = x^2
    }
    
    // 3. 按要求格式输出结果
    printf("y = %.2f\n", y);
    
    return 0;
}
```

## 代码解析

1. **头文件包含**
   - `stdio.h`：提供基本的输入输出函数
   - `math.h`：提供数学函数，这里需要用到fabs()函数计算绝对值

2. **变量类型选择**
   - 使用double类型而不是float，可以提供更高的精度
   - 输入时使用%lf而不是%f格式符

3. **分支结构设计**
   - 使用if-else if-else结构实现三种情况的判断
   - 条件判断的顺序很重要，要按照函数定义域的顺序来写
   - 第二个条件只需要判断x < 100，因为x >= 0的情况已经在第一个if中被排除了

4. **注意事项**
   - 浮点数比较时要注意精度问题（本题中的分界点是整数，所以不会有问题）
   - 输出保留两位小数使用%.2f，不需要对y值进行额外处理

## 测试用例

1. 测试x < 0的情况：
   - 输入：x = -5
   - 预期输出：y = 5.00

2. 测试0 <= x < 100的情况：
   - 输入：x = 50
   - 预期输出：y = 101.00

3. 测试x >= 100的情况：
   - 输入：x = 100
   - 预期输出：y = 10000.00

## 易错点分析

1. **边界值处理**
   - x = 0和x = 100是分段点，要特别注意这些值的处理
   - 代码中使用了<=和>=来明确包含边界值

2. **数学函数使用**
   - 很多同学可能会忘记包含math.h头文件
   - 有时会把fabs()写成abs()，但abs()是针对整数的绝对值函数

3. **精度控制**
   - 输出要求保留两位小数，注意使用正确的格式控制符
   - 如果使用float类型可能在某些大数值时出现精度损失

## 扩展思考

1. 如何优化代码结构使其更易读？
   - 可以使用函数来封装不同的计算逻辑
   - 可以使用常量定义分界点值（如#define BOUNDARY_1 0和#define BOUNDARY_2 100）

2. 如何处理输入错误？
   - 可以添加输入验证
   - 处理scanf的返回值
   - 处理非数字输入的情况

3. 如何提高程序的健壮性？
   - 添加输入范围检查
   - 处理可能的溢出情况
   - 添加适当的错误提示
